<div *ngFor="let tone of tones; let i=index">
  <mat-card>
    <mat-card-content>
      <mat-accordion color="accent">
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              {{tone.name?tone.name:'No-name'}}<br>
              ({{tone.frequency}}Hz {{tone.waveType}} @ {{tone.volume}}%)
            </mat-panel-title>
          </mat-expansion-panel-header>
          <!-- This is the tone controls -->
          <app-tone-controls [tone]="tone" (toneChange)="onChange(i,$event)"></app-tone-controls>
        </mat-expansion-panel>
      </mat-accordion>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button (click)="deleteTone(i)">Delete</button>
      <button mat-button>Clone</button>
      <button mat-raised-button *ngIf="tone.playing" (click)="play(i, false)" color="primary">Stop</button>
      <button mat-button *ngIf="!tone.playing" (click)="play(i,true)">Play</button>

    </mat-card-actions>
  </mat-card>
</div>
<button (click)="addTone()" class="bottom-right" mat-fab color="primary" aria-label="Add tone button">
  <mat-icon>add</mat-icon>
</button>
<pre>{{tones|json}}</pre>
